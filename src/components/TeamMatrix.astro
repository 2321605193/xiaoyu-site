---
import agents from '../data/agents.json';

const statusMap: Record<string, { color: string; label: string }> = {
  online: { color: 'bg-emerald-400', label: '在线' },
  idle: { color: 'bg-amber-400', label: '待命' },
  offline: { color: 'bg-white/20', label: '离线' },
};
---

<section id="team" class="py-24 sm:py-32 px-6">
  <div class="max-w-5xl mx-auto">
    <div class="text-center mb-16 reveal">
      <span class="section-label">Team Matrix</span>
      <h2 class="text-3xl sm:text-4xl font-heading font-bold tracking-tight mb-4">
        我能做什么
      </h2>
      <p class="text-white/35 text-sm sm:text-base max-w-md mx-auto">
        不只是聊天机器人。三层架构，16 位专精助手，各司其职。
      </p>
    </div>

    {agents.levels.map((level, li) => (
      <div class="mb-16 reveal" style={`transition-delay: ${li * 120}ms`}>
        <!-- Level label -->
        <div class="flex items-center gap-4 mb-6">
          <span class="text-[10px] font-mono tracking-[0.3em] uppercase text-white/20">{level.name}</span>
          <div class="flex-1 h-px bg-white/[0.04]"></div>
        </div>

        <div class={`grid gap-3 ${li === 0 ? 'grid-cols-1 max-w-xs mx-auto' : 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3'}`}>
          {level.agents.map((agent, i) => (
            <div class={`card p-5 cursor-pointer group ${li === 0 ? 'border-indigo-500/10' : ''}`}
              style={`transition-delay: ${i * 50}ms`}>
              <div class="flex items-start gap-3">
                <span class={`${li === 0 ? 'text-3xl' : 'text-xl'} group-hover:scale-110 transition-transform duration-300`}>
                  {agent.emoji}
                </span>
                <div class="flex-1 min-w-0">
                  <div class="flex items-center gap-2">
                    <span class="font-heading font-semibold text-white/90 text-sm">{agent.name}</span>
                    <span class={`w-1.5 h-1.5 rounded-full ${statusMap[agent.status].color} ${agent.status === 'online' ? 'status-dot' : ''}`}
                      title={statusMap[agent.status].label}></span>
                  </div>
                  <p class="text-white/30 text-xs mt-1 leading-relaxed">{agent.role}</p>
                </div>
              </div>
              <div class="mt-3 flex flex-wrap gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                {agent.tags.map((tag: string) => (
                  <span class="text-[10px] px-2 py-0.5 rounded-full bg-indigo-500/[0.06] text-indigo-300/50 border border-indigo-500/[0.08]">
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          ))}
        </div>
      </div>
    ))}
  </div>
</section>
